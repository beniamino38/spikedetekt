{"name":"Spikedetekt","tagline":"","body":"SpikeDetekt\r\n-----------\r\n\r\nThis is a program for spike detection, that is optimized for high-channel count silicon probes.\r\n\r\nThis software was developed at the [Cortical Processing Laboratory](http://www.ucl.ac.uk/cortexlab) at UCL.\r\n\r\nPlease send feedback to Kenneth Harris (firstname at cortexlab.net), Shabnam Kadir (firstname at cortexlab.net)\r\n\r\nSubscribe to our googlegroups by sending an email to:  klustaviewas+subscribe 'at' googlegroups.com\r\n\r\nHere is a quick Start Guide (will become more comprehensive with time):\r\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------\r\n\r\n0) Installation:\r\n----------------\r\n\r\nSpikeDetekt is written in Python and should work on any OS. To install it, make sure you first have Python on your computer.\r\n\r\nWe recommend you use Python 2.6 or 2.7 (don't use python 3.X!). A free academic distribution can be obtained from [Enthought Python](http://enthought.com/products/epd.php).\r\n\r\nSpikeDetekt requires the following Python packages to be installed:\r\n\r\n* NumPy\r\n* SciPy\r\n* PyTables\r\n* h5py\r\n\r\nOnce you have set up Python on your system, download and unzip/tar either the .zip file or the tarball,\r\ngo to the `spikedetekt' folder and type (on the command line):\r\n\r\n    python setup.py install\r\n\r\nIn the above,  'python' is the necessary command on your system for calling python. The file 'setup.py' is to be found in the unzipped folder spikedetekt. \r\n\r\nThis will install SpikeDetekt. \r\n\r\n1) Usage:\r\n----------\r\n\r\nTo perform spike detection, you need:\r\n\r\n* a .dat file (which contains your raw unfiltered electrode data), \r\n* a .probe file, which contains information about the electrode,\r\n* a .params file, which contains all other parameters.\r\n\r\nThe .dat file is a flat file of two byte signed integers, in the order [Time1Channel1, Time1Channel2, .. Time1ChannelN, Time2Channel1, ...]\r\n\r\nThe above may have any combination of names. The name of your .params file will be the name of the folder where all the output will be stored. The simplest case is when you have the same name for all three files:\r\n\r\n    myexperiment.dat\r\n    myexperiment.probe\r\n    myexperiment.params\r\n    \r\nThis will result in output files contained in a folder with the local name: myexperiment.     \r\n\r\n2) Probefiles:\r\n---------------\r\nThe probe file is a text file that contains information about the spatial arrangement of electrodes on the recording probe. SpikeDetekt needs this information because it detects spikes on high-count probes as spatiotemporally continuous threshold crossings. \r\n\r\nThe probe file must contain an \"adjancy graph\", the specifies all pairs of channels that are nearest neighbors. (Sometimes you will want to also include second-nearest neighbors in the graph too). \r\n\r\nThis information is presented in the following form:\r\n\r\n    probes = {\r\n        1: [\r\n            (0, 1), (0, 2),\r\n            (1, 2), (1, 3),\r\n            ...\r\n            ],\r\n        2: [\r\n           (13,15),(13,14),...\r\n            ],\r\n            \r\n        shank number: [neighbouring channel pairs\r\n            ],\r\n        ...\r\n        }\r\n\r\nThe probe file is actually formatted as a python command defining dictionary variable *probes*, with one key for each shank number, and values a list of neighboring channel pairs on that shank. If you don't know Python, don't worry, just think of it as a text file with the above format. \r\n\r\nAs a more concrete example, for the following 32 channel zig-zag probe the adjacency graph is defined by the black lines:\r\n\r\n<img src=\"docs/images/adjacency.png\" height=\"750px\" width=\"200px\" />\r\n\r\n\r\n\r\nIf there are odd channels on one edge, even channels on the other, the .probe file corresponding to the above probe would like something this: \r\n\r\n    probes = {\r\n        # Probe 1\r\n\t    1:[\r\n\t\t    (0, 1), (0, 2),\r\n\t\t    (1, 2), (1, 3),\r\n\t    \t(2, 3), (2, 4),\r\n\t    \t(3, 4), (3, 5),\r\n    \t\t(4, 5), (4, 6),\r\n    \t\t(5, 6), (5, 7),\r\n    \t\t(6, 7), (6, 8),\r\n\t    \t(7, 8), (7, 9),\r\n\t\t    (8, 9), (8, 10),\r\n    \t\t(9, 10), (9, 11),\r\n    \t\t(10, 11), (10, 12),\r\n    \t\t(11, 12), (11, 13),\r\n    \t\t(12, 13), (12, 14),\r\n    \t\t(13, 14), (13, 15),\r\n    \t\t(14, 15), (14, 16),\r\n    \t\t(15, 16), (15, 17),\r\n    \t\t(16, 17), (16, 18),\r\n    \t\t(17, 18), (17, 19),\r\n\t    \t(18, 19), (18, 20),\r\n    \t\t(19, 20), (19, 21),\r\n\t    \t(20, 21), (20, 22),\r\n\t    \t(21, 22), (21, 23),\r\n\t    \t(22, 23), (22, 24),\r\n\t    \t(23, 24), (23, 25),\r\n\t    \t(24, 25), (24, 26),\r\n\t    \t(25, 26), (25, 27),\r\n\t    \t(26, 27), (26, 28),\r\n\t     \t(27, 28), (27, 29),\r\n\t    \t(28, 29), (28, 30),\r\n\t    \t(29, 30), (29, 31),\r\n\t    \t(30, 31),\r\n\t\t    ]\r\n\t    }\r\n\r\nFurther examples of probe files can be found in the distribution: \r\n\r\n* buzsaki32.probe\r\n* linear16.probe\r\n* multishankslinear32.probe (an 8 shank example)\r\n\r\n\r\n3) Parameters to adjust\r\n----------------------------\r\nThe parameter file (with a name something like myexperiment.params) contains further information about how to detect spikes. The following parameters, specifying the probe file name, the raw data files, number of recording channels and sample rate, are compulsory:\r\n    \r\n    RAW_DATA_FILES = ['file1.dat', 'file2.dat','file3.dat']\r\n    SAMPLERATE = 20000 # in Hertz\r\n    NCHANNELS = 32\r\n    PROBE_FILE = 'probe_filename.probe'\r\n\r\nNote that you can specify an ordered list of .dat files, which will be concatenated before spikes are detected.\r\n\r\nThere are also a lot of optional parameters. You should specify these in your parameter file if you want to override the default parameters, whose value appears in the file spikedetekt/spikedetekt/defaultparameters.py. Note that the parameter files are also python scripts, but again you don't need to worry about this, just think of them as text files.  These parameters, and an explanation of what they do, can be found in the file defaultparameters.py.\r\n\r\n\r\n4) Running\r\n----------------------------\r\n\r\nTo run the program type the following into the command line:\r\n\r\n    python spikedetekt/scripts/detektspikes.py myexperiment.params\r\n \r\nSee below on how to configure your parameter file, myexperiment.params according to the specifics of your experimental setup.\r\n\r\n\r\n5) Output\r\n---------------\r\n\r\nSpikeDetekt will output the following files for each shank, where n is the shank number:\r\n\r\n+ .fet.n (feature file - required for all versions of KlustaKwik)\r\n\r\n+ .fmask.n (float masks for using with the new masked KlustaKwik)\r\n\r\n+ .mask.n (soon to be obsolete: binary masks for using with the new masked KlustaKwik)\r\n\r\n+ .spk.n (spike waveforms)\r\n\r\n+ .upsk.n (unfiltered spike waveforms)\r\n\r\n+ .res.n (list of spike times)\r\n\r\n+ .clu.n (a trivial clu file that puts all spikes in a single cluster. This is replaced by running KlustaKwik later on)\r\n\r\nIn addition, the following file will also be output:\r\n\r\n+ .xml (an xml file with the parameters that are needed by the data visualization programs: Neuroscope and Klusters). We now recommend using KlustaViewa for manual clustering.\r\n\r\n+ .fil (highpass filtered data)\r\n\r\n+ .h5 files (an [.h5](http://en.wikipedia.org/wiki/Hierarchical_Data_Format) file duplicating a lot of the above data, which will later replace the above).\r\n  .high.h5,\r\n  .low.h5,\r\n  .waves.h5,\r\n  .main.h5,\r\n  .raw.h5. (See spikdetekt/docs/fileformat.md for more details).\r\n\r\n6) How to cite\r\n--------------\r\n\r\nIf you have used KlustaKwik and/or SpikeDetekt for a scientific publication, please cite our preprint on the arxiv,\r\n'High-dimensional cluster analysis with the Masked EM Algorithm' by Shabnam N. Kadir, Dan F.M. Goodman and Kenneth D. Harris:\r\n\r\nhttp://arxiv.org/abs/1309.2848\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}